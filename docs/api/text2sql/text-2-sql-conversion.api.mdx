---
id: text-2-sql-conversion
title: "Text2SQL Conversion"
description: "Converts a natural language query into an SQL query and executes it."
sidebar_label: "Text2SQL Conversion"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: api/text2sql/hubble-ai-text-2-sql-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Text2SQL Conversion"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/text2sql"}
  context={"endpoint"}
>
  
</MethodEndpoint>




Converts a natural language query into an SQL query and executes it. 

**Authentication:**
- Requires `HUBBLE-API-KEY` header

**Streaming vs Regular Response:**
- Set `stream: true` (default) for Server-Sent Events (SSE) streaming
- Set `stream: false` for regular JSON response

### Streaming Event Types:
- **workflow_start**: The workflow has started
- **node_execution**: A node in the graph is being executed (includes node field)
- **plan_created**: The execution plan has been created
- **step_completed**: A step in the plan has been completed
- **llm_start**: LLM generation started
- **token**: A real-time token generated by the LLM
- **llm_end**: LLM generation completed
- **node_error**: An error occurred in a specific node (includes node field)
- **result**: The final result of the execution
- **complete**: The process has finished
- **error**: An error occurred

### Event Fields:
- **node**: Current node being executed (e.g., "planner", "executor", "recovery", "completion")
- **step**: Current step number in the workflow
- **totalSteps**: Total number of steps (available in completion events)

### Usage Examples:

**Streaming Response:**
```javascript
fetch('/agent/api/v1/text2sql', {
  method: 'POST',
  headers: { 
    'Content-Type': 'application/json',
    'HUBBLE-API-KEY': 'your-api-key'
  },
  body: JSON.stringify({ 
    query: 'Show me the top 10 token trades by volume today',
    stream: true // default
  })
}).then(response => {
  const reader = response.body.getReader();
  // Process streaming data
});
```

**Regular Response:**
```javascript
fetch('/agent/api/v1/text2sql', {
  method: 'POST',
  headers: { 
    'Content-Type': 'application/json',
    'HUBBLE-API-KEY': 'your-api-key'
  },
  body: JSON.stringify({ 
    query: 'Show me the top 10 token trades by volume today',
    stream: false
  })
}).then(response => response.json());
```
  

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"query":{"type":"string","minLength":1,"description":"The user's natural language query"},"stream":{"type":"boolean","default":true,"description":"Whether to return streaming response (default: true)"}},"required":["query"]}}}}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Returns either streaming events or JSON response based on stream parameter.","content":{"text/event-stream":{"schema":{"type":"object","properties":{"data":{"type":"object","properties":{"type":{"type":"string","enum":["workflow_start","node_execution","plan_created","step_completed","llm_start","token","llm_end","node_error","result","complete","error"],"description":"The type of the Text2SQL event"},"node":{"type":"string","description":"The current node being executed"},"step":{"type":"number","description":"The current step number"},"totalSteps":{"type":"number","description":"Total number of steps"},"data":{"description":"The event data"},"timestamp":{"type":"string","description":"Timestamp of the event"},"message":{"type":"string","description":"Message associated with the event"}},"required":["type","timestamp"],"description":"SSE event data"}},"required":["data"]}},"application/json":{"schema":{"type":"object","properties":{"data":{"type":"array","items":{},"description":"Query execution results"},"sql":{"type":"string","description":"Generated SQL query"},"timestamp":{"type":"string","description":"Timestamp of the response"}},"required":["data","timestamp"]}}}},"400":{"description":"Invalid request parameters.","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Error message"},"timestamp":{"type":"string","description":"Timestamp of the error"}},"required":["error","timestamp"]}}}},"500":{"description":"Internal server error.","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Error message"},"timestamp":{"type":"string","description":"Timestamp of the error"}},"required":["error","timestamp"]}}}}}}
>
  
</StatusCodes>


      