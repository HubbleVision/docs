---
id: chart-generation
title: "Chart Generation"
description: "Generates interactive charts from natural language queries. First converts the query to SQL, executes it, then creates a chart from the data."
sidebar_label: "Chart Generation"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: api/text2sql/hubble-ai-text-2-sql-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Chart Generation"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/generate-chart"}
  context={"endpoint"}
>
  
</MethodEndpoint>




Generates interactive charts from natural language queries. First converts the query to SQL, executes it, then creates a chart from the data.

**Authentication:**
- Requires `HUBBLE-API-KEY` header

**Streaming vs Regular Response:**
- Set `stream: true` (default) for Server-Sent Events (SSE) streaming
- Set `stream: false` for regular JSON response

### AI Chart Selection:
The system automatically analyzes your data and query to select the most appropriate chart type:
- **Line charts** for time series and trend data
- **Bar charts** for categorical comparisons
- **Pie charts** for proportional data
- **Scatter plots** for correlation analysis
- **Area charts** for cumulative data

### Streaming Event Types:
- **chart_start**: Chart generation process started
- **node_execution**: A node in the workflow is being executed (includes node field)
- **chart_sql_complete**: SQL query execution completed
- **chart_generation_start**: Chart generation started
- **chart_generation_complete**: Chart generation completed
- **chart_complete**: Entire process completed with chart result
- **chart_error**: An error occurred during chart generation
- **node_error**: An error occurred in a specific node (includes node field)
- **llm_start**: LLM generation started
- **token**: Real-time LLM token (during generation)
- **llm_end**: LLM generation completed

### Event Fields:
- **node**: Current node being executed (e.g., "text2sql", "chart_generation")
- **step**: Current step number in the workflow
- **totalSteps**: Total number of steps (available in completion events)

### Usage Examples:

**Streaming Response:**
```javascript
fetch('/agent/api/v1/generate-chart', {
  method: 'POST',
  headers: { 
    'Content-Type': 'application/json',
    'HUBBLE-API-KEY': 'your-api-key'
  },
  body: JSON.stringify({ 
    query: 'Show token price trends over the last 30 days',
    stream: true // default
  })
}).then(response => {
  const reader = response.body.getReader();
  // Process streaming data
});
```

**Regular Response:**
```javascript
fetch('/agent/api/v1/generate-chart', {
  method: 'POST',
  headers: { 
    'Content-Type': 'application/json',
    'HUBBLE-API-KEY': 'your-api-key'
  },
  body: JSON.stringify({ 
    query: 'Show token price trends over the last 30 days',
    stream: false
  })
}).then(response => response.json());
```
  

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"type":"object","properties":{"query":{"type":"string","minLength":1,"description":"The user's natural language query"},"stream":{"type":"boolean","default":true,"description":"Whether to return streaming response (default: true)"}},"required":["query"]}}}}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Returns either streaming events or JSON response based on stream parameter.","content":{"text/event-stream":{"schema":{"type":"object","properties":{"data":{"type":"object","properties":{"type":{"type":"string","enum":["chart_start","node_execution","chart_sql_complete","chart_generation_start","chart_generation_complete","chart_data_analysis_complete","chart_selection_complete","chart_rendering_complete","chart_complete","chart_error","node_error","llm_start","token","llm_end","error"],"description":"The type of the Chart generation event"},"node":{"type":"string","description":"The current node being executed"},"step":{"type":"number","description":"The current step number"},"totalSteps":{"type":"number","description":"Total number of steps"},"data":{"description":"The event data"},"timestamp":{"type":"string","description":"Timestamp of the event"},"message":{"type":"string","description":"Message associated with the event"}},"required":["type","timestamp"],"description":"SSE event data"}},"required":["data"]}},"application/json":{"schema":{"type":"object","properties":{"sql":{"type":"string","description":"Generated SQL query"},"data":{"description":"Query execution results"},"chart":{"type":"object","properties":{"chartType":{"type":"string","description":"The type of chart generated"},"htmlCode":{"type":"string","description":"Complete HTML code for the chart"},"previewUrl":{"type":"string","description":"URL to preview the chart"},"dataInsights":{"type":"array","items":{"type":"string"},"description":"Insights about the data visualization"},"generationTime":{"type":"number","description":"Time taken to generate the chart in milliseconds"}},"required":["chartType","htmlCode","dataInsights","generationTime"],"description":"Generated chart information"},"timestamp":{"type":"string","description":"Timestamp of the response"}},"required":["sql","chart","timestamp"]}}}},"400":{"description":"Invalid request parameters.","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Error message"},"timestamp":{"type":"string","description":"Timestamp of the error"}},"required":["error","timestamp"]}}}},"500":{"description":"Internal server error.","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","description":"Error message"},"timestamp":{"type":"string","description":"Timestamp of the error"}},"required":["error","timestamp"]}}}}}}
>
  
</StatusCodes>


      